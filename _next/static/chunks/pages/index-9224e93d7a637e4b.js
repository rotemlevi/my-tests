(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return o(6209)}])},6209:function(e,t,o){"use strict";o.r(t);var r=o(5893),n=o(7294),l=o(7066),i=o(1955),s=o(2568),a=o.n(s);t.default=()=>{var e,t;let[o,s]=(0,n.useState)(i.Z.get("quizState")||Date.now().toString()),[d,c]=(0,n.useState)([]),[u,p]=(0,n.useState)([]),[g,h]=(0,n.useState)(0),[x,f]=(0,n.useState)(0),[b,m]=(0,n.useState)(0),[S,w]=(0,n.useState)(!1),[j,y]=(0,n.useState)([]),[C,k]=(0,n.useState)(!1),[v,F]=(0,n.useState)(0),[q,_]=(0,n.useState)(0),[A,R]=(0,n.useState)([]),[T,E]=(0,n.useState)("");(0,n.useEffect)(()=>{let e=i.Z.get("quizState");if(e){let t=localStorage.getItem(e);if(t){let e=JSON.parse(function(e){let t=atob(e),o=new Uint8Array(t.length);for(let e=0;e<t.length;e++)o[e]=t.charCodeAt(e);return new TextDecoder().decode(o)}(t));console.log("Loaded state from local storage:",e),s(e.testId),h(e.currentQuestionIndex),c(e.questions),p(e.answers),R(e.questionTimes),k(e.testStarted),_(e.startTime),f(e.initialTime),m(e.elapsedTime),E(e.stateHash)}else D()}else D()},[]),(0,n.useEffect)(()=>{if(C){let e=setInterval(()=>{let e=Math.floor((Date.now()-q)/1e3);m(e),e>=x&&Z()},1e3);return()=>clearInterval(e)}},[C,q,x]),(0,n.useEffect)(()=>{C&&z()},[o,g,d,u,A,C,q,x,b]);let D=async()=>{try{let e="/my-tests";console.log("Base Path:",e);let t=(await l.Z.get("".concat(e,"/questions.json"))).data.filter(e=>!e.complaints||e.complaints<=1);t=I(t),c(t),p(Array(t.length).fill(null)),R(Array(t.length).fill(0)),f(60*t.length)}catch(e){console.error("Failed to load questions:",e)}},I=e=>{for(let t=e.length-1;t>0;t--){let o=Math.floor(Math.random()*(t+1));[e[t],e[o]]=[e[o],e[t]]}return e},N=e=>{let{testId:t,questions:o,answers:r,currentQuestionIndex:n,testStarted:l,questionTimes:i,showResults:s,results:d,score:c}=e;return a()(JSON.stringify({testId:t,questions:o,answers:r,currentQuestionIndex:n,testStarted:l,questionTimes:i,showResults:s,results:d,score:c}))},z=()=>{let e={testId:o,currentQuestionIndex:g,questions:d,answers:u,questionTimes:A,testStarted:C,startTime:q,initialTime:x,elapsedTime:b,stateHash:T},t=N(e);if(T!==t){console.log("Saving state to local storage:",e),E(t),e.stateHash=t;let r=function(e){let t=new TextEncoder().encode(e),o="";for(let e=0;e<t.length;e++)o+=String.fromCharCode(t[e]);return btoa(o)}(JSON.stringify(e));localStorage.setItem(o,r),console.log("State saved to local storage:",localStorage.getItem(o))}},O=async()=>{await D();let e=Date.now().toString();s(e),_(Date.now()),k(!0),m(0),i.Z.set("quizState",e,{expires:1}),z()},Z=()=>{Date.now();let e=d.map((e,t)=>{let o=u[t],r=o===e.correctAnswer;return{question:e.question,correct:e.correctAnswer,userAnswer:o,isCorrect:r,timeTaken:A[t]}});y(e),F(e.filter(e=>e.isCorrect).length),w(!0),i.Z.remove("quizState"),localStorage.removeItem(o)},L=()=>{let e=Date.now();R(t=>{let o=[...t];return o[g]=(e-q)/6e4,o}),_(e),g<d.length-1&&h(g+1)},M=e=>{let t=[...u];t[g]=e,p(t),console.log("Option changed:",t),z()},B=async()=>{i.Z.remove("quizState"),w(!1),h(0),k(!1),p([]),F(0),m(0),R([]),s(Date.now().toString()),await D()},J=x-b;return(0,r.jsx)("div",{style:{padding:"20px",fontFamily:"Arial, sans-serif"},children:S?(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{style:{color:"#4CAF50"},children:"תוצאות:"}),j.map((e,t)=>(0,r.jsxs)("div",{style:{backgroundColor:e.isCorrect?"#d4edda":"#f8d7da",padding:"20px",marginBottom:"10px",borderRadius:"5px"},children:[(0,r.jsx)("p",{children:e.question}),(0,r.jsxs)("p",{children:["התשובה שלך: ",d[t].options[e.userAnswer]]}),(0,r.jsxs)("p",{children:["התשובה הנכונה: ",d[t].options[e.correct]]}),(0,r.jsx)("p",{children:e.isCorrect?"נכון":"לא נכון"}),(0,r.jsxs)("p",{children:["זמן שלקח לענות: ",e.timeTaken.toFixed(2)," דקות"]})]},t)),(0,r.jsxs)("h3",{style:{color:"#FF5733"},children:["ניקוד סופי: ",v," מתוך ",d.length]}),(0,r.jsx)("button",{onClick:B,style:{padding:"10px 20px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"חזור"})]}):(0,r.jsx)(r.Fragment,{children:C?(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:(0,r.jsxs)("p",{style:{color:"#FF5733",fontSize:"18px"},children:["זמן שנותר: ",(e=>{let t=e%60;return"".concat(Math.floor(e/60),":").concat(t<10?"0":"").concat(t)})(J)]})}),(0,r.jsxs)("div",{style:{backgroundColor:"#f9f9f9",padding:"20px",borderRadius:"5px",boxShadow:"0 0 10px rgba(0,0,0,0.1)"},children:[(0,r.jsxs)("p",{style:{fontSize:"18px"},children:["שאלה ",g+1,": ",null===(e=d[g])||void 0===e?void 0:e.question]}),null===(t=d[g])||void 0===t?void 0:t.options.map((e,t)=>(0,r.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,r.jsx)("input",{type:"radio",name:"question-".concat(g),value:t,checked:u[g]===t,onChange:()=>M(t),style:{marginRight:"10px"}}),(0,r.jsx)("label",{children:e})]},t))]}),(0,r.jsxs)("div",{style:{marginTop:"20px"},children:[(0,r.jsx)("button",{onClick:()=>{g>0&&h(g-1)},disabled:g<1,style:{padding:"10px 20px",backgroundColor:g<1?"#b0c4de":"#2196F3",color:"white",border:"none",borderRadius:"5px",cursor:g<1?"not-allowed":"pointer",marginRight:"10px"},children:"הקודם"}),(0,r.jsx)("button",{onClick:L,disabled:g>=d.length-1,style:{padding:"10px 20px",backgroundColor:g>=d.length-1?"#b0c4de":"#2196F3",color:"white",border:"none",borderRadius:"5px",cursor:g>=d.length-1?"not-allowed":"pointer"},children:"הבא"}),(0,r.jsx)("button",{onClick:Z,disabled:g!==d.length-1,style:{padding:"10px 20px",backgroundColor:g>=d.length-1?"#FF5733":"#b0c4de",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",marginLeft:"10px"},children:"שלח"}),(0,r.jsx)("button",{onClick:()=>{let e=[...d],t=e[g];t.complaints||(t.complaints=0),t.complaints++,c(e),z(),L()},style:{padding:"10px 20px",backgroundColor:"#FF5733",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",marginLeft:"10px"},children:"דווח על שאלה"}),(0,r.jsx)("button",{onClick:B,style:{padding:"10px 20px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",marginLeft:"10px"},children:"התחל מבחן חדש"})]})]}):(0,r.jsx)("div",{children:(0,r.jsx)("button",{onClick:O,style:{padding:"10px 20px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"התחל מבחן"})})})})}}},function(e){e.O(0,[672,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);