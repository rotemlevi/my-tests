(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return o(6209)}])},6209:function(e,t,o){"use strict";o.r(t);var n=o(5893),r=o(7294),l=o(7066),i=o(1955),s=o(2568),a=o.n(s),d=o(3454);t.default=()=>{var e,t;let[o,s]=(0,r.useState)(i.Z.get("quizState")||Date.now().toString()),[c,u]=(0,r.useState)([]),[p,g]=(0,r.useState)([]),[h,x]=(0,r.useState)(0),[f,b]=(0,r.useState)(0),[m,S]=(0,r.useState)(0),[w,j]=(0,r.useState)(!1),[C,y]=(0,r.useState)([]),[v,k]=(0,r.useState)(!1),[F,_]=(0,r.useState)(0),[q,A]=(0,r.useState)(0),[T,E]=(0,r.useState)([]),[R,I]=(0,r.useState)("");(0,r.useEffect)(()=>{let e=i.Z.get("quizState");if(e){let t=localStorage.getItem(e);if(t){let e=JSON.parse(function(e){let t=atob(e),o=new Uint8Array(t.length);for(let e=0;e<t.length;e++)o[e]=t.charCodeAt(e);return new TextDecoder().decode(o)}(t));console.log("Loaded state from local storage:",e),s(e.testId),x(e.currentQuestionIndex),u(e.questions),g(e.answers),E(e.questionTimes),k(e.testStarted),A(e.startTime),b(e.initialTime),S(e.elapsedTime),I(e.stateHash)}else N()}else N()},[]),(0,r.useEffect)(()=>{if(v){let e=setInterval(()=>{let e=Math.floor((Date.now()-q)/1e3);S(e),e>=f&&B()},1e3);return()=>clearInterval(e)}},[v,q,f]),(0,r.useEffect)(()=>{v&&O()},[o,h,c,p,T,v,q,f,m]);let N=async()=>{try{let e=d.env.NEXT_PUBLIC_BASE_PATH||"";console.log("Base Path:",e);let t=(await l.Z.get("".concat(e,"/questions.json"))).data.filter(e=>!e.complaints||e.complaints<=1);t=D(t),u(t),g(Array(t.length).fill(null)),E(Array(t.length).fill(0)),b(60*t.length)}catch(e){console.error("Failed to load questions:",e)}},D=e=>{for(let t=e.length-1;t>0;t--){let o=Math.floor(Math.random()*(t+1));[e[t],e[o]]=[e[o],e[t]]}return e},z=e=>{let{testId:t,questions:o,answers:n,currentQuestionIndex:r,testStarted:l,questionTimes:i,showResults:s,results:d,score:c}=e;return a()(JSON.stringify({testId:t,questions:o,answers:n,currentQuestionIndex:r,testStarted:l,questionTimes:i,showResults:s,results:d,score:c}))},O=()=>{let e={testId:o,currentQuestionIndex:h,questions:c,answers:p,questionTimes:T,testStarted:v,startTime:q,initialTime:f,elapsedTime:m,stateHash:R},t=z(e);if(R!==t){console.log("Saving state to local storage:",e),I(t),e.stateHash=t;let n=function(e){let t=new TextEncoder().encode(e),o="";for(let e=0;e<t.length;e++)o+=String.fromCharCode(t[e]);return btoa(o)}(JSON.stringify(e));localStorage.setItem(o,n),console.log("State saved to local storage:",localStorage.getItem(o))}},Z=async()=>{await N();let e=Date.now().toString();s(e),A(Date.now()),k(!0),S(0),i.Z.set("quizState",e,{expires:1}),O()},B=()=>{Date.now();let e=c.map((e,t)=>{let o=p[t],n=o===e.correctAnswer;return{question:e.question,correct:e.correctAnswer,userAnswer:o,isCorrect:n,timeTaken:T[t]}});y(e),_(e.filter(e=>e.isCorrect).length),j(!0),i.Z.remove("quizState"),localStorage.removeItem(o)},L=()=>{let e=Date.now();E(t=>{let o=[...t];return o[h]=(e-q)/6e4,o}),A(e),h<c.length-1&&x(h+1)},P=e=>{let t=[...p];t[h]=e,g(t),console.log("Option changed:",t),O()},M=async()=>{i.Z.remove("quizState"),j(!1),x(0),k(!1),g([]),_(0),S(0),E([]),s(Date.now().toString()),await N()},H=f-m;return(0,n.jsx)("div",{style:{padding:"20px",fontFamily:"Arial, sans-serif"},children:w?(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{style:{color:"#4CAF50"},children:"תוצאות:"}),C.map((e,t)=>(0,n.jsxs)("div",{style:{backgroundColor:e.isCorrect?"#d4edda":"#f8d7da",padding:"20px",marginBottom:"10px",borderRadius:"5px"},children:[(0,n.jsx)("p",{children:e.question}),(0,n.jsxs)("p",{children:["התשובה שלך: ",c[t].options[e.userAnswer]]}),(0,n.jsxs)("p",{children:["התשובה הנכונה: ",c[t].options[e.correct]]}),(0,n.jsx)("p",{children:e.isCorrect?"נכון":"לא נכון"}),(0,n.jsxs)("p",{children:["זמן שלקח לענות: ",e.timeTaken.toFixed(2)," דקות"]})]},t)),(0,n.jsxs)("h3",{style:{color:"#FF5733"},children:["ניקוד סופי: ",F," מתוך ",c.length]}),(0,n.jsx)("button",{onClick:M,style:{padding:"10px 20px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"חזור"})]}):(0,n.jsx)(n.Fragment,{children:v?(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:(0,n.jsxs)("p",{style:{color:"#FF5733",fontSize:"18px"},children:["זמן שנותר: ",(e=>{let t=e%60;return"".concat(Math.floor(e/60),":").concat(t<10?"0":"").concat(t)})(H)]})}),(0,n.jsxs)("div",{style:{backgroundColor:"#f9f9f9",padding:"20px",borderRadius:"5px",boxShadow:"0 0 10px rgba(0,0,0,0.1)"},children:[(0,n.jsxs)("p",{style:{fontSize:"18px"},children:["שאלה ",h+1,": ",null===(e=c[h])||void 0===e?void 0:e.question]}),null===(t=c[h])||void 0===t?void 0:t.options.map((e,t)=>(0,n.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,n.jsx)("input",{type:"radio",name:"question-".concat(h),value:t,checked:p[h]===t,onChange:()=>P(t),style:{marginRight:"10px"}}),(0,n.jsx)("label",{children:e})]},t))]}),(0,n.jsxs)("div",{style:{marginTop:"20px"},children:[(0,n.jsx)("button",{onClick:()=>{h>0&&x(h-1)},disabled:h<1,style:{padding:"10px 20px",backgroundColor:h<1?"#b0c4de":"#2196F3",color:"white",border:"none",borderRadius:"5px",cursor:h<1?"not-allowed":"pointer",marginRight:"10px"},children:"הקודם"}),(0,n.jsx)("button",{onClick:L,disabled:h>=c.length-1,style:{padding:"10px 20px",backgroundColor:h>=c.length-1?"#b0c4de":"#2196F3",color:"white",border:"none",borderRadius:"5px",cursor:h>=c.length-1?"not-allowed":"pointer"},children:"הבא"}),(0,n.jsx)("button",{onClick:B,disabled:h!==c.length-1,style:{padding:"10px 20px",backgroundColor:h>=c.length-1?"#FF5733":"#b0c4de",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",marginLeft:"10px"},children:"שלח"}),(0,n.jsx)("button",{onClick:()=>{let e=[...c],t=e[h];t.complaints||(t.complaints=0),t.complaints++,u(e),O(),L()},style:{padding:"10px 20px",backgroundColor:"#FF5733",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",marginLeft:"10px"},children:"דווח על שאלה"}),(0,n.jsx)("button",{onClick:M,style:{padding:"10px 20px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",marginLeft:"10px"},children:"התחל מבחן חדש"})]})]}):(0,n.jsx)("div",{children:(0,n.jsx)("button",{onClick:Z,style:{padding:"10px 20px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"התחל מבחן"})})})})}}},function(e){e.O(0,[843,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);