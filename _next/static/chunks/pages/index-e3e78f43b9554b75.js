(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(6209)}])},6209:function(e,t,r){"use strict";r.r(t);var o=r(5893),n=r(7294),i=r(7066),l=r(1955),s=r(2568),a=r.n(s);t.default=()=>{var e,t;let[r,s]=(0,n.useState)(l.Z.get("quizState")||Date.now().toString()),[d,c]=(0,n.useState)([]),[u,p]=(0,n.useState)([]),[h,x]=(0,n.useState)(0),[g,b]=(0,n.useState)(0),[f,m]=(0,n.useState)(0),[S,w]=(0,n.useState)(!1),[j,y]=(0,n.useState)([]),[C,k]=(0,n.useState)(!1),[v,F]=(0,n.useState)(0),[_,q]=(0,n.useState)(0),[A,R]=(0,n.useState)([]),[T,E]=(0,n.useState)("");(0,n.useEffect)(()=>{let e=l.Z.get("quizState");if(e){let t=localStorage.getItem(e);if(t){let e=JSON.parse(function(e){let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return new TextDecoder().decode(r)}(t));s(e.testId),x(e.currentQuestionIndex),c(e.questions),p(e.answers),R(e.questionTimes),k(e.testStarted),q(e.startTime),b(e.initialTime),m(e.elapsedTime),E(e.stateHash)}else I()}else I()},[]),(0,n.useEffect)(()=>{if(C){let e=setInterval(()=>{let e=Math.floor((Date.now()-_)/1e3);m(e),e>=g&&M()},1e3);return()=>clearInterval(e)}},[C,_,g]),(0,n.useEffect)(()=>{C&&O()},[r,h,d,u,A,C,_,g,f]);let I=async()=>{try{let e=(await i.Z.get("".concat("/my-tests","/questions.json"))).data.filter(e=>!e.complaints||e.complaints<=1);e=N(e),c(e),p(Array(e.length).fill(null)),R(Array(e.length).fill(0)),b(60*e.length)}catch(e){console.error("Failed to load questions:",e)}},N=e=>{for(let t=e.length-1;t>0;t--){let r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e},z=e=>{let{testId:t,questions:r,answers:o,currentQuestionIndex:n,testStarted:i,questionTimes:l,showResults:s,results:d,score:c}=e;return a()(JSON.stringify({testId:t,questions:r,answers:o,currentQuestionIndex:n,testStarted:i,questionTimes:l,showResults:s,results:d,score:c}))},D=e=>/^test_\d{13}$/.test(e),O=()=>{let e={testId:r,currentQuestionIndex:h,questions:d,answers:u,questionTimes:A,testStarted:C,startTime:_,initialTime:g,elapsedTime:f,stateHash:T},t=z(e);if(T!==t){E(t),e.stateHash=t;let o=function(e){let t=new TextEncoder().encode(e),r="";for(let e=0;e<t.length;e++)r+=String.fromCharCode(t[e]);return btoa(r)}(JSON.stringify(e)),n=Object.keys(localStorage).filter(D).sort();n.length>4&&n.slice(0,n.length-4).forEach(e=>localStorage.removeItem(e)),localStorage.setItem(r,o)}},Z=async()=>{await I();let e="test_".concat(Date.now().toString());s(e),q(Date.now()),k(!0),m(0),l.Z.set("quizState",e,{expires:1})},M=()=>{let e=d.map((e,t)=>{let r=u[t],o=r===e.correctAnswer;return{question:e.question,correct:e.correctAnswer,userAnswer:r,isCorrect:o,timeTaken:A[t]}});y(e),F(e.filter(e=>e.isCorrect).length),w(!0),l.Z.remove("quizState"),localStorage.removeItem(r)},J=()=>{let e=Date.now();R(t=>{let r=[...t];return r[h]=(e-_)/6e4,r}),q(e),h<d.length-1&&x(h+1)},L=e=>{let t=[...u];t[h]=e,p(t)},B=async()=>{l.Z.remove("quizState"),w(!1),x(0),k(!1),p([]),F(0),m(0),R([]),s("test_".concat(Date.now().toString())),await I()},H=g-f;return(0,o.jsx)("div",{style:{padding:"20px",fontFamily:"Arial, sans-serif"},children:S?(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{style:{color:"#4CAF50"},children:"תוצאות:"}),j.map((e,t)=>(0,o.jsxs)("div",{style:{backgroundColor:e.isCorrect?"#d4edda":"#f8d7da",padding:"20px",marginBottom:"10px",borderRadius:"5px"},children:[(0,o.jsx)("p",{children:e.question}),(0,o.jsxs)("p",{children:["התשובה שלך: ",d[t].options[e.userAnswer]]}),(0,o.jsxs)("p",{children:["התשובה הנכונה: ",d[t].options[e.correct]]}),(0,o.jsx)("p",{children:e.isCorrect?"נכון":"לא נכון"}),(0,o.jsxs)("p",{children:["זמן שלקח לענות: ",e.timeTaken.toFixed(2)," דקות"]})]},t)),(0,o.jsxs)("h3",{style:{color:"#FF5733"},children:["ניקוד סופי: ",v," מתוך ",d.length]}),(0,o.jsx)("button",{onClick:B,style:{padding:"10px 20px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"חזור"})]}):(0,o.jsx)(o.Fragment,{children:C?(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{children:(0,o.jsxs)("p",{style:{color:"#FF5733",fontSize:"18px"},children:["זמן שנותר: ",(e=>{let t=e%60;return"".concat(Math.floor(e/60),":").concat(t<10?"0":"").concat(t)})(H)]})}),(0,o.jsxs)("div",{style:{backgroundColor:"#f9f9f9",padding:"20px",borderRadius:"5px",boxShadow:"0 0 10px rgba(0,0,0,0.1)"},children:[(0,o.jsxs)("p",{style:{fontSize:"18px"},children:["שאלה ",h+1,": ",null===(e=d[h])||void 0===e?void 0:e.question]}),null===(t=d[h])||void 0===t?void 0:t.options.map((e,t)=>(0,o.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,o.jsx)("input",{type:"radio",name:"question-".concat(h),value:t,checked:u[h]===t,onChange:()=>L(t),style:{marginRight:"10px"}}),(0,o.jsx)("label",{children:e})]},t))]}),(0,o.jsxs)("div",{style:{marginTop:"20px"},children:[(0,o.jsx)("button",{onClick:()=>{h>0&&x(h-1)},disabled:h<1,style:{padding:"10px 20px",backgroundColor:h<1?"#b0c4de":"#2196F3",color:"white",border:"none",borderRadius:"5px",cursor:h<1?"not-allowed":"pointer",marginRight:"10px"},children:"הקודם"}),(0,o.jsx)("button",{onClick:J,disabled:h>=d.length-1,style:{padding:"10px 20px",backgroundColor:h>=d.length-1?"#b0c4de":"#2196F3",color:"white",border:"none",borderRadius:"5px",cursor:h>=d.length-1?"not-allowed":"pointer"},children:"הבא"}),(0,o.jsx)("button",{onClick:M,disabled:h!==d.length-1,style:{padding:"10px 20px",backgroundColor:h>=d.length-1?"#FF5733":"#b0c4de",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",marginLeft:"10px"},children:"שלח"}),(0,o.jsx)("button",{disabled:!0,onClick:()=>{let e=[...d],t=e[h];t.complaints||(t.complaints=0),t.complaints++,c(e),J()},style:{padding:"10px 20px",backgroundColor:"#FF5733",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",marginLeft:"10px"},children:"דווח על שאלה"}),(0,o.jsx)("button",{onClick:B,style:{padding:"10px 20px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",marginLeft:"10px"},children:"התחל מבחן חדש"})]})]}):(0,o.jsx)("div",{children:(0,o.jsx)("button",{onClick:Z,style:{padding:"10px 20px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"התחל מבחן"})})})})}}},function(e){e.O(0,[672,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);