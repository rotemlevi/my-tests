(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(6209)}])},6209:function(t,e,n){"use strict";n.r(e);var o=n(5893),s=n(7294),a=n(7066),r=n(1955),i=n(2568),l=n.n(i),c=n(5291),u=n.n(c);e.default=()=>{var t,e;let[n,i]=(0,s.useState)(r.Z.get("quizState")||Date.now().toString()),[c,_]=(0,s.useState)([]),[d,m]=(0,s.useState)([]),[h,f]=(0,s.useState)(0),[b,x]=(0,s.useState)(0),[C,S]=(0,s.useState)(0),[p,g]=(0,s.useState)(!1),[j,H]=(0,s.useState)([]),[N,v]=(0,s.useState)(!1),[B,q]=(0,s.useState)(0),[w,k]=(0,s.useState)(0),[T,E]=(0,s.useState)([]),[y,I]=(0,s.useState)("");(0,s.useEffect)(()=>{let t=r.Z.get("quizState");if(t){let e=localStorage.getItem(t);if(e){let t=JSON.parse(function(t){let e=atob(t),n=new Uint8Array(e.length);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return new TextDecoder().decode(n)}(e));i(t.testId),f(t.currentQuestionIndex),_(t.questions),m(t.answers),E(t.questionTimes),v(t.testStarted),k(t.startTime),x(t.initialTime),S(t.elapsedTime),I(t.stateHash)}else A()}else A()},[]),(0,s.useEffect)(()=>{if(N){let t=setInterval(()=>{let t=Math.floor((Date.now()-w)/1e3);S(t),t>=b&&M()},1e3);return()=>clearInterval(t)}},[N,w,b]),(0,s.useEffect)(()=>{N&&J()},[n,h,c,d,T,N,w,b,C]);let A=async()=>{try{let t=(await a.Z.get("".concat("/my-tests","/questions.json"))).data.filter(t=>!t.complaints||t.complaints<=1);t=D(t),_(t),m(Array(t.length).fill(null)),E(Array(t.length).fill(0)),x(60*t.length)}catch(t){console.error("Failed to load questions:",t)}},D=t=>{for(let e=t.length-1;e>0;e--){let n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t},O=t=>{let{testId:e,questions:n,answers:o,currentQuestionIndex:s,testStarted:a,questionTimes:r,showResults:i,results:c,score:u}=t;return l()(JSON.stringify({testId:e,questions:n,answers:o,currentQuestionIndex:s,testStarted:a,questionTimes:r,showResults:i,results:c,score:u}))},Z=t=>/^test_\d{13}$/.test(t),J=()=>{let t={testId:n,currentQuestionIndex:h,questions:c,answers:d,questionTimes:T,testStarted:N,startTime:w,initialTime:b,elapsedTime:C,stateHash:y},e=O(t);if(y!==e){I(e),t.stateHash=e;let o=function(t){let e=new TextEncoder().encode(t),n="";for(let t=0;t<e.length;t++)n+=String.fromCharCode(e[t]);return btoa(n)}(JSON.stringify(t)),s=Object.keys(localStorage).filter(Z).sort();s.length>4&&s.slice(0,s.length-4).forEach(t=>localStorage.removeItem(t)),localStorage.setItem(n,o)}},z=async()=>{await A();let t="test_".concat(Date.now().toString());i(t),k(Date.now()),v(!0),S(0),r.Z.set("quizState",t,{expires:1})},M=()=>{let t=c.map((t,e)=>{let n=d[e],o=n===t.correctAnswer;return{question:t.question,correct:t.correctAnswer,userAnswer:n,isCorrect:o,timeTaken:T[e]}});H(t),q(t.filter(t=>t.isCorrect).length),g(!0),r.Z.remove("quizState"),localStorage.removeItem(n)},F=()=>{let t=Date.now();E(e=>{let n=[...e];return n[h]=(t-w)/6e4,n}),k(t),h<c.length-1&&f(h+1)},L=t=>{let e=[...d];e[h]=t,m(e)},P=async()=>{r.Z.remove("quizState"),g(!1),f(0),v(!1),m([]),q(0),S(0),E([]),i("test_".concat(Date.now().toString())),await A()},U=b-C;return(0,o.jsx)("div",{className:u().container,children:p?(0,o.jsxs)("div",{className:u().resultsContainer,children:[(0,o.jsx)("h2",{className:u().resultsTitle,children:"תוצאות:"}),j.map((t,e)=>{var n;return(0,o.jsxs)("div",{className:"".concat(u().result," ").concat(t.isCorrect?u().correct:u().incorrect),children:[(0,o.jsx)("p",{children:t.question}),(0,o.jsxs)("p",{children:["התשובה שלך: ",null!==(n=c[e].options[t.userAnswer])&&void 0!==n?n:"לא נבחרה תשובה"]}),(0,o.jsxs)("p",{children:["התשובה הנכונה: ",c[e].options[t.correct]]}),(0,o.jsx)("p",{children:t.isCorrect?"נכון":"לא נכון"}),(0,o.jsxs)("p",{children:["זמן שלקח לענות: ",t.timeTaken.toFixed(2)," דקות"]})]},e)}),(0,o.jsxs)("h3",{className:u().finalScore,children:["ניקוד סופי: ",B," מתוך ",c.length]}),(0,o.jsx)("button",{onClick:P,className:"".concat(u().button," ").concat(u().navButton),children:"חזור"})]}):(0,o.jsx)(o.Fragment,{children:N?(0,o.jsxs)("div",{className:u().testContainer,children:[(0,o.jsx)("div",{className:u().timerContainer,children:(0,o.jsxs)("p",{className:u().timer,children:["זמן שנותר: ",(t=>{let e=t%60;return"".concat(Math.floor(t/60),":").concat(e<10?"0":"").concat(e)})(U)]})}),(0,o.jsxs)("div",{className:u().questionContainer,children:[(0,o.jsxs)("p",{className:u().question,children:["שאלה ",h+1,": ",null===(t=c[h])||void 0===t?void 0:t.question]}),null===(e=c[h])||void 0===e?void 0:e.options.map((t,e)=>(0,o.jsxs)("label",{className:u().option,children:[(0,o.jsx)("input",{type:"radio",name:"question-".concat(h),value:e,checked:d[h]===e,onChange:()=>L(e),className:u().radio}),(0,o.jsx)("span",{className:u().fixedLabel,children:t})]},e))]}),(0,o.jsxs)("div",{className:u().buttonContainer,children:[(0,o.jsx)("button",{onClick:()=>{h>0&&f(h-1)},disabled:h<1,className:"".concat(u().button," ").concat(h<1?u().disabledButton:u().navButton),children:"הקודם"}),(0,o.jsx)("button",{onClick:F,disabled:h>=c.length-1,className:"".concat(u().button," ").concat(h>=c.length-1?u().disabledButton:u().navButton),children:"הבא"}),(0,o.jsx)("button",{onClick:M,disabled:h!==c.length-1,className:"".concat(u().button," ").concat(h!==c.length-1?u().disabledButton:u().submitButton),children:"שלח"}),(0,o.jsx)("button",{onClick:()=>{let t=[...c],e=t[h];e.complaints||(e.complaints=0),e.complaints++,_(t),F()},className:"".concat(u().button," ").concat(u().reportButton),children:"דווח על שאלה"}),(0,o.jsx)("button",{onClick:P,className:"".concat(u().button," ").concat(u().resetButton),children:"התחל מבחן חדש"})]})]}):(0,o.jsx)("div",{className:u().startContainer,children:(0,o.jsx)("button",{onClick:z,className:"".concat(u().button," ").concat(u().startButton),children:"התחל מבחן"})})})})}},5291:function(t){t.exports={container:"Home_container__d256j",startContainer:"Home_startContainer__o5s7B",testContainer:"Home_testContainer__28EZO",resultsContainer:"Home_resultsContainer__H9Wyv",timerContainer:"Home_timerContainer__09xGI",questionContainer:"Home_questionContainer__5dAQU",buttonContainer:"Home_buttonContainer__nOVuY",timer:"Home_timer__VO2Ij",question:"Home_question__rwhgH",option:"Home_option__kApEq",radio:"Home_radio__TVHZC",label:"Home_label__D_5fs",fixedLabel:"Home_fixedLabel__Pm4_c",button:"Home_button__G93Ef",disabledButton:"Home_disabledButton__a2Tt_",submitButton:"Home_submitButton__ECzIY",navButton:"Home_navButton__CJnYb",startButton:"Home_startButton__Bekfq",reportButton:"Home_reportButton__538JT",resetButton:"Home_resetButton__iUZsR",resultsTitle:"Home_resultsTitle__EXbdM",result:"Home_result__kTSSh",correct:"Home_correct__684CB",incorrect:"Home_incorrect__D1eSd",finalScore:"Home_finalScore__IqEJJ"}}},function(t){t.O(0,[672,888,774,179],function(){return t(t.s=8312)}),_N_E=t.O()}]);