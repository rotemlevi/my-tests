(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return o(6209)}])},6209:function(e,t,o){"use strict";o.r(t);var r=o(5893),n=o(7294),l=o(7066),i=o(1955),s=o(2568),a=o.n(s),d=o(3454);t.default=()=>{var e,t;let[o,s]=(0,n.useState)(i.Z.get("quizState")||Date.now().toString()),[c,u]=(0,n.useState)([]),[p,g]=(0,n.useState)([]),[x,h]=(0,n.useState)(0),[f,b]=(0,n.useState)(0),[m,S]=(0,n.useState)(0),[w,j]=(0,n.useState)(!1),[C,y]=(0,n.useState)([]),[v,k]=(0,n.useState)(!1),[F,_]=(0,n.useState)(0),[q,A]=(0,n.useState)(0),[T,E]=(0,n.useState)([]),[R,I]=(0,n.useState)("");(0,n.useEffect)(()=>{let e=i.Z.get("quizState");if(e){let t=localStorage.getItem(e);if(t){let e=JSON.parse(function(e){let t=atob(e),o=new Uint8Array(t.length);for(let e=0;e<t.length;e++)o[e]=t.charCodeAt(e);return new TextDecoder().decode(o)}(t));console.log("Loaded state from local storage:",e),s(e.testId),h(e.currentQuestionIndex),u(e.questions),g(e.answers),E(e.questionTimes),k(e.testStarted),A(e.startTime),b(e.initialTime),S(e.elapsedTime),I(e.stateHash)}else N()}else N()},[]),(0,n.useEffect)(()=>{if(v){let e=setInterval(()=>{let e=Math.floor((Date.now()-q)/1e3);S(e),e>=f&&L()},1e3);return()=>clearInterval(e)}},[v,q,f]),(0,n.useEffect)(()=>{v&&O()},[o,x,c,p,T,v,q,f,m]);let N=async()=>{try{let e=d.env.NEXT_PUBLIC_BASE_PATH||"",t=(await l.Z.get("".concat(e,"/questions.json"))).data.filter(e=>!e.complaints||e.complaints<=1);t=D(t),u(t),g(Array(t.length).fill(null)),E(Array(t.length).fill(0)),b(60*t.length)}catch(e){console.error("Failed to load questions:",e)}},D=e=>{for(let t=e.length-1;t>0;t--){let o=Math.floor(Math.random()*(t+1));[e[t],e[o]]=[e[o],e[t]]}return e},z=e=>{let{testId:t,questions:o,answers:r,currentQuestionIndex:n,testStarted:l,questionTimes:i,showResults:s,results:d,score:c}=e;return a()(JSON.stringify({testId:t,questions:o,answers:r,currentQuestionIndex:n,testStarted:l,questionTimes:i,showResults:s,results:d,score:c}))},O=()=>{let e={testId:o,currentQuestionIndex:x,questions:c,answers:p,questionTimes:T,testStarted:v,startTime:q,initialTime:f,elapsedTime:m,stateHash:R},t=z(e);if(R!==t){console.log("Saving state to local storage:",e),I(t),e.stateHash=t;let r=function(e){let t=new TextEncoder().encode(e),o="";for(let e=0;e<t.length;e++)o+=String.fromCharCode(t[e]);return btoa(o)}(JSON.stringify(e));localStorage.setItem(o,r),console.log("State saved to local storage:",localStorage.getItem(o))}},Z=async()=>{await N();let e=Date.now().toString();s(e),A(Date.now()),k(!0),S(0),i.Z.set("quizState",e,{expires:1}),O()},L=()=>{Date.now();let e=c.map((e,t)=>{let o=p[t],r=o===e.correctAnswer;return{question:e.question,correct:e.correctAnswer,userAnswer:o,isCorrect:r,timeTaken:T[t]}});y(e),_(e.filter(e=>e.isCorrect).length),j(!0),i.Z.remove("quizState"),localStorage.removeItem(o)},B=()=>{let e=Date.now();E(t=>{let o=[...t];return o[x]=(e-q)/6e4,o}),A(e),x<c.length-1&&h(x+1)},M=e=>{let t=[...p];t[x]=e,g(t),console.log("Option changed:",t),O()},P=async()=>{i.Z.remove("quizState"),j(!1),h(0),k(!1),g([]),_(0),S(0),E([]),s(Date.now().toString()),await N()},H=f-m;return(0,r.jsx)("div",{style:{padding:"20px",fontFamily:"Arial, sans-serif"},children:w?(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{style:{color:"#4CAF50"},children:"תוצאות:"}),C.map((e,t)=>(0,r.jsxs)("div",{style:{backgroundColor:e.isCorrect?"#d4edda":"#f8d7da",padding:"20px",marginBottom:"10px",borderRadius:"5px"},children:[(0,r.jsx)("p",{children:e.question}),(0,r.jsxs)("p",{children:["התשובה שלך: ",c[t].options[e.userAnswer]]}),(0,r.jsxs)("p",{children:["התשובה הנכונה: ",c[t].options[e.correct]]}),(0,r.jsx)("p",{children:e.isCorrect?"נכון":"לא נכון"}),(0,r.jsxs)("p",{children:["זמן שלקח לענות: ",e.timeTaken.toFixed(2)," דקות"]})]},t)),(0,r.jsxs)("h3",{style:{color:"#FF5733"},children:["ניקוד סופי: ",F," מתוך ",c.length]}),(0,r.jsx)("button",{onClick:P,style:{padding:"10px 20px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"חזור"})]}):(0,r.jsx)(r.Fragment,{children:v?(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:(0,r.jsxs)("p",{style:{color:"#FF5733",fontSize:"18px"},children:["זמן שנותר: ",(e=>{let t=e%60;return"".concat(Math.floor(e/60),":").concat(t<10?"0":"").concat(t)})(H)]})}),(0,r.jsxs)("div",{style:{backgroundColor:"#f9f9f9",padding:"20px",borderRadius:"5px",boxShadow:"0 0 10px rgba(0,0,0,0.1)"},children:[(0,r.jsxs)("p",{style:{fontSize:"18px"},children:["שאלה ",x+1,": ",null===(e=c[x])||void 0===e?void 0:e.question]}),null===(t=c[x])||void 0===t?void 0:t.options.map((e,t)=>(0,r.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,r.jsx)("input",{type:"radio",name:"question-".concat(x),value:t,checked:p[x]===t,onChange:()=>M(t),style:{marginRight:"10px"}}),(0,r.jsx)("label",{children:e})]},t))]}),(0,r.jsxs)("div",{style:{marginTop:"20px"},children:[(0,r.jsx)("button",{onClick:()=>{x>0&&h(x-1)},disabled:x<1,style:{padding:"10px 20px",backgroundColor:x<1?"#b0c4de":"#2196F3",color:"white",border:"none",borderRadius:"5px",cursor:x<1?"not-allowed":"pointer",marginRight:"10px"},children:"הקודם"}),(0,r.jsx)("button",{onClick:B,disabled:x>=c.length-1,style:{padding:"10px 20px",backgroundColor:x>=c.length-1?"#b0c4de":"#2196F3",color:"white",border:"none",borderRadius:"5px",cursor:x>=c.length-1?"not-allowed":"pointer"},children:"הבא"}),(0,r.jsx)("button",{onClick:L,disabled:x!==c.length-1,style:{padding:"10px 20px",backgroundColor:x>=c.length-1?"#FF5733":"#b0c4de",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",marginLeft:"10px"},children:"שלח"}),(0,r.jsx)("button",{onClick:()=>{let e=[...c],t=e[x];t.complaints||(t.complaints=0),t.complaints++,u(e),O(),B()},style:{padding:"10px 20px",backgroundColor:"#FF5733",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",marginLeft:"10px"},children:"דווח על שאלה"}),(0,r.jsx)("button",{onClick:P,style:{padding:"10px 20px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",marginLeft:"10px"},children:"התחל מבחן חדש"})]})]}):(0,r.jsx)("div",{children:(0,r.jsx)("button",{onClick:Z,style:{padding:"10px 20px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"התחל מבחן"})})})})}}},function(e){e.O(0,[843,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);